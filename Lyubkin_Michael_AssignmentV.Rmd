---
title: "__Solutions for Assignment V: GitHub and the ticketmaster.com API__"
author: "__DS400 Data Science Project Management WS 20/21__"
date: "February 13, 2021"
output: 
  html_document:
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
I worked together with Lana Kern (Student ID: 5395819), Martin Scheerer
(Student ID: 5631373) and Anton HÃ¶hl (Student ID: 5637078). I hereby assure that
my submission is in line with the *Code of Conduct* outlined on the lecture slides.

### __General Setup__

irst I use ``opts_knit$set(root.dir = "")`` from the ``knitr`` package to set a 
working directory that will not cause problems in RMarkdown. Secondly, I clear my
workspace and load ( if needed) the relevant R packages that I need for the assignment.

```{r general_setup}
rm(list = ls())  # clear workspace

# Setting my working directory in RMarkdown with the knitr package, instead of setwd() to not get any type of inconsistencies.

knitr::opts_knit$set(root.dir = "C:/Users/Lenovo/Desktop/Uni/Data Science Project Management/Assignments/Assignment5/DSPM_Assignment")

# Install relevant packages if needed

if (!require("tidyverse")) install.packages("tidyverse")
if (!require("httr")) install.packages("httr")
if (!require("rlist")) install.packages("rlist")
if (!require("jsonlite")) install.packages("jsonlite")
if (!require("maps")) install.packages("maps")

# Load the respective packages

library(tidyverse)
library(httr)
library(rlist)
library(jsonlite)
library(maps)

```

## __Exercise 2: Getting to know the API__

```{r source_API_key}
source("API_key.R")

```


## __Exercise 3: Interacting with the API - the basics__

```{r API_requests}
response <- GET("https://app.ticketmaster.com/discovery/v2/venues.json?",
                  query=list(apikey=API_key,
                             countryCode="DE",
                             locale="*"))

status_code(response)

json <- jsonlite::fromJSON(content(x=response, as = "text"))

venues <- json$`_embedded`$venues

venues_data <- 0

venues_data$name <- venues$name
venues_data$city <- venues$city$name
venues_data$postalCode <- venues$postalCode
venues_data$address <- venues$address$line1
venues_data$url <- venues$url
venues_data$longitude <- as.double(venues$location$longitude)
venues_data$latitude <- as.double(venues$location$latitude)

venues_data <- as.data.frame(venues_data)

venues_data <- venues_data[,-1]

glimpse(venues_data)

```



